# Implementation Plan

- [x] 1. プロジェクト設定とビルド基盤の構築
- [x] 1.1 リポジトリ初期設定とパッケージ管理
  - package.jsonを作成し、ビルドに必要な依存パッケージ（Vite、WASMプラグイン、トップレベルawaitプラグイン、プロセス並列実行ツール）をdevDependenciesとしてインストールする
  - .gitignoreにビルド成果物ディレクトリ（dist/）とNode.js依存ディレクトリ（node_modules/）を追加する
  - _Requirements: 5.1, 5.2_

- [x] 1.2 Viteビルド設定の作成
  - WASMプラグインとトップレベルawaitプラグインを統合し、WASMモジュールのESMインポートを有効化する
  - GitHub Pagesのサブディレクトリパスで正しく動作するベースパスを設定する
  - esnextターゲットでの本番ビルドとdist/への出力を設定する（JS最小化はViteのデフォルト動作に委ねる）
  - Vite dev serverがWASMファイルに正しいMIMEタイプを返すことを確認する
  - _Requirements: 1.2, 1.5, 2.2, 4.2_

- [x] 2. WASMビルドパイプラインの統合
- [x] 2.1 (P) ビルドスクリプトの設定
  - wasm-pack（bundlerターゲット）とViteビルドを順次実行するnpmスクリプトを定義する
  - 単一コマンド（npm run build）でWASMコンパイルからフロントエンドバンドルまで完了する構成にする
  - _Requirements: 1.1, 1.3_

- [x] 2.2 (P) フロントエンドコードのbundlerターゲット対応
  - main.jsのWASMモジュールインポートパターンをbundlerターゲット出力に適合させる
  - 既存の描画ロジック（ズーム、パン、リアルタイム描画）がそのまま動作することを維持する
  - _Requirements: 1.3, 4.4_

- [x] 3. (P) SPAエントリーポイントとローディングUIの実装
  - HTMLにCSS-onlyのスピナーアニメーションを追加する（外部ライブラリ不使用、WASM未ロード時でも動作保証）
  - WASMロード中はCanvasを非表示にし、ローディングインジケーターを表示する
  - WASM初期化完了後にローディングUIを除去しCanvasを表示する状態遷移をmain.jsに実装する
  - _Requirements: 4.1, 4.3, 4.5_

- [x] 4. (P) Rust自動リビルド対応の開発サーバー構成
  - cargo-watchによるRustソースの変更監視とwasm-pack自動再実行を設定する
  - cargo-watchとVite dev serverを並列起動するdevスクリプトを構成する
  - Rustソース変更時にWASMが自動再ビルドされ、ブラウザに変更が反映される開発フローを確立する
  - _Requirements: 1.4, 2.1, 2.3_

- [x] 5. (P) GitHub Actions CI/CDパイプラインの構築
  - masterブランチへのプッシュ時にトリガーするデプロイワークフローを作成する
  - Rustツールチェーン、wasm-pack、Node.js環境の自動セットアップを構成する
  - ビルド成功時のGitHub Pages自動デプロイと、ビルド失敗時のデプロイ中止を設定する
  - GitHub Pagesに必要なパーミッション（pages: write, id-token: write）と同時実行制御を構成する
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_

- [x] 6. 統合検証とビルド動作確認
  - 本番ビルド（npm run build）を実行し、dist/にHTML、JS、WASMファイルが正しく出力されることを確認する
  - ビルド成果物をブラウザで確認し、マンデルブロ集合の描画・ズーム・パン操作が正常に機能することを検証する
  - 既存のRustユニットテスト（cargo test）が引き続きパスすることを確認する（回帰テスト）
  - _Requirements: 4.4_

## 並列実行ガイド

| グループ | タスク | 前提条件 |
|----------|--------|----------|
| 1 (基盤) | 1.1 → 1.2 | なし |
| 2 (並列) | 2.1 (P), 2.2 (P), 5 (P) | Task 1 完了後 |
| 3 (並列) | 3 (P), 4 (P) | Task 2 完了後 |
| 4 (統合) | 6 | Task 1-5 すべて完了後 |

## 要件カバレッジ

| 要件ID | タスク | 説明 |
|--------|--------|------|
| 1.1 | 2.1 | 単一コマンドビルド |
| 1.2 | 1.2 | dist/出力 |
| 1.3 | 2.1, 2.2 | WASMバンドル |
| 1.4 | 4 | 開発モード自動リビルド |
| 1.5 | 1.2 | 本番最小化・最適化 |
| 2.1 | 4 | ローカルHTTPサーバー |
| 2.2 | 1.2 | WASM MIMEタイプ |
| 2.3 | 4 | 自動リビルド |
| 3.1 | 5 | masterプッシュ時ビルド |
| 3.2 | 5 | 自動デプロイ |
| 3.3 | 5 | GitHub Actions構成 |
| 3.4 | 5 | 環境セットアップ自動化 |
| 3.5 | 5 | ビルド失敗時デプロイ中止 |
| 4.1 | 3 | 単一HTMLエントリー |
| 4.2 | 1.2 | サブディレクトリパス対応 |
| 4.3 | 3 | ローディング表示 |
| 4.4 | 2.2, 6 | 既存機能維持 |
| 4.5 | 3 | ローディング状態表示 |
| 5.1 | 1.1 | gitignore更新 |
| 5.2 | 1.1 | package.json管理 |

## 延期事項

| 要件ID | 理由 |
|--------|------|
| 5.3 | ドキュメント作成タスク（README更新）はタスク生成ルールにより実装タスクから除外。実装完了後に別途対応する |
